# BiliBlock-通过关键词屏蔽B站视频

一个 Chrome 浏览器插件，用于屏蔽B站视频，只要标题中包含关键词的视频都会被屏蔽，目前支持了首页和热门页视频。  
已上架到chrome应用商店，地址：[BiliBlock-通过关键词屏蔽B站视频](https://chromewebstore.google.com/detail/biliblock-%E9%80%9A%E8%BF%87%E5%85%B3%E9%94%AE%E8%AF%8D%E5%B1%8F%E8%94%BDb%E7%AB%99%E8%A7%86%E9%A2%91/fhpfjgpkileoggjbochgnjcafenljcdg?utm_source=ext_app_menu)

## 功能特性

- **关键词屏蔽**：根据用户输入的关键词，隐藏 B 站页面中包含指定关键词的视频。
- **自定义关键词**：通过插件弹窗设置关键词，实时保存并应用。
- **动态页面支持**：支持滚动加载的 B 站页面，保证新加载的视频也能被屏蔽。
- **域名限制**：插件仅在 `bilibili.com` 域名下运行，避免对其他网站的影响。
- **云端同步**：设置自动同步到浏览器账号，多设备间无缝使用。

## 云端同步功能

### 特性说明
- **自动同步**：设置会自动同步到你的浏览器账号（需要登录Chrome/Edge等浏览器）
- **版本控制**：每次保存设置都会生成版本号，确保使用最新的设置
- **冲突解决**：当本地和云端设置不一致时，自动选择最新版本
- **网络容错**：网络连接失败时自动回退到本地设置，不影响正常使用
- **手动同步**：支持手动触发同步，立即检查并更新设置

### 使用方法
1. 在插件设置页面中，"云端同步"开关默认开启
2. 每次保存设置时会自动同步到云端
3. 在其他设备上安装插件后，设置会自动从云端加载
4. 可以点击"手动同步"按钮立即检查云端更新

### 同步状态说明
- **云端同步: 已启用** - 设置会自动同步
- **云端同步: 已禁用** - 仅使用本地设置
- **本地版本/云端版本** - 显示当前设置的版本号
- **最后同步** - 显示最近一次同步的时间

## 安装方法
1. 克隆项目到本地：
   ```
   git clone https://github.com/DemoJ/BiliBlock
   ```
2. 打开 Chrome 扩展程序页面：
3. 在浏览器地址栏输入 chrome://extensions/。
4. 开启 开发者模式。
5. 点击 加载已解压的扩展程序，选择项目所在的文件夹。
6. 安装完成后，点击浏览器右上角插件图标即可使用。

## 使用方法
1. 打开 Bilibili 网站。
2. 点击浏览器右上角插件图标，打开设置界面。
3. 在输入框中输入需要屏蔽的关键词，多个关键词用 | 分隔，例如：
    ```
    广告|推广|挑战
    ```
4. 点击保存按钮，返回 B 站页面，即可看到包含指定关键词的视频被隐藏。
5. 设置会自动同步到云端，在其他设备上登录相同浏览器账号即可自动获取设置。

## 技术实现

### 云端同步架构
- 使用 `chrome.storage.sync` API 实现云端存储
- 版本控制机制确保数据一致性
- 设备指纹识别避免冲突
- 异步加载和保存，不阻塞用户操作

### 数据结构
```javascript
{
  titleKeywords: "关键词1|关键词2",
  sectionKeywords: "分区1|分区2", 
  upKeywords: "UP主1|UP主2",
  minDuration: 60,
  cleanMode: true,
  version: 1640995200000,  // 时间戳版本号
  deviceId: "device_abc123_1640995200000"
}
```
